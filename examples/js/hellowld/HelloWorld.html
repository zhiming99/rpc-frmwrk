<!--
 GENERATED BY RIDLC, MAKE SURE TO BACKUP BEFORE RUNNING RIDLC AGAIN
 Copyright (C) 2025  zhiming <woodhead99@gmail.com>
 This program can be distributed under the terms of the GNU GPLv3.

* command line: /usr/local/bin/ridlc -JO. -Lcn --odesc_url=https://example.com/rpcf ../../hellowld.ridl 
* npm dependency: assert browserify buffer exports minify vm envents crypto-browserify
* long lz4 process put safe-buffer stream xxhash xxhashjs webpack webpack-cli
* stream-browserify
-->
<!DOCTYPE html>
<html><head><meta charset="utf-8" /></head></html>
<body>
<p id="log">Example: Hello World<br /></p>
<div id="rpcf_status"></div>
<script>
// set a callback on RPC connection ready
// this callback will be called from the
// 'maincli.js' when the connection to server is
// established.
globalThis.OutputMsg = (strMsg)=>{
    var oLog = document.getElementById( "rpcf_status" );
    if( oLog === null )
        return;
    if( oLog.innerHTML.length > 10000 )
        oLog.innerHTML = "";
    oLog.innerHTML += strMsg + "<br />";
    console.log( strMsg );
}
globalThis.onRpcReady=()=>{
    globalThis.OutputMsg( "RPC connection ready " );
    var oProxy = globalThis.oProxy;
    var oContext = new Object();
    oContext.m_oCallback = (oContext, ret, strResp)=>{
        if( ret & 0x80000000 )
            globalThis.OutputMsg( "error returned")
        else
            globalThis.OutputMsg( 'server response is ' + strResp );
    }
    //make the call to the server
    return oProxy.Echo( oContext, "Hello, World!" );
}
//# sourceURL=rpcf://htmlcode/sendreq.js
</script>
<script src="dist/HelloWorld.js">
<p id="rpcf_load_notify"><br /></p>
</script>
<script>
globalThis.g_bAuth = false
globalThis.g_strAuthMech = ""
var iChecks = 0;
function checkProxyState(){
    if( globalThis.oProxy === undefined ){
        setTimeout( checkProxyState, 2000 );
        console.log( "Waiting RPC connection ready..." );
    }else if( globalThis.oProxy === null ){
        globalThis.OutputMsg( "RPC connection is shutdown abnormally..." );
    }else if( globalThis.oProxy.m_iState === 0 ){
        globalThis.OutputMsg( "RPC connection is down..." );
        globalThis.oProxy = null;
    }else{
        if( iChecks++ === 0 )
            globalThis.OutputMsg( "RPC connection ready " + globalThis.oProxy );
        setTimeout( checkProxyState, 5000 );
    }
}
setTimeout( checkProxyState, 2000 );
//# sourceURL=rpcf://htmlcode/checkstate.js
</script>
</body>
