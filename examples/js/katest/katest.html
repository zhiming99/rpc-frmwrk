<!--
 GENERATED BY RIDLC, MAKE SURE TO BACKUP BEFORE RUNNING RIDLC AGAIN
 Copyright (C) 2024  zhiming <woodhead99@gmail.com>
 This program can be distributed under the terms of the GNU GPLv3.

* command line: ridlc -JO. -Lcn --odesc_url=http://example.com/rpcf ../../katest.ridl 
* npm dependency: assert browserify buffer exports minify vm envents crypto-browserify
* long lz4 process put safe-buffer stream xxhash xxhashjs webpack webpack-cli
-->
<!DOCTYPE html>
<html><head><meta charset="utf-8" /></head></html>
<body>
<p id="log">Sample HTML<br /></p>
<script>
globalThis.onRpcReady=()=>{
    var oProxy = globalThis.oProxy;
    var oContext = new Object();
    oProxy.LongWait( oContext, "hello, World!" );
}
</script>
<script src="dist/katest.js">
</script>
<script>
console.log( "hello, katest!");
var iChecks = 0;
function checkProxyState(){
    if( globalThis.oProxy === undefined ){
        setTimeout( checkProxyState, 2000 );
        console.log( "Waiting RPC connection ready..." );
    }else if( globalThis.oProxy === null ){
        console.log( "RPC connection is shutdown abnormally..." );
    }else if( globalThis.oProxy.m_iState === 5 ){
        console.log( "RPC connection is down..." );
        globalThis.oProxy = null;
    }else{
        if( iChecks++ === 0 )
            console.log( "RPC connection ready " + globalThis.oProxy );
        setTimeout( checkProxyState, 5000 );
    }
}
setTimeout( checkProxyState, 2000 );
//# sourceURL=rpcf://htmlcode/checkstate.js
</script>
</body>
